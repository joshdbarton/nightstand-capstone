{% extends 'nightstand_dashboard/base.html' %}

{% block content %}
{% for id, values in books.items %}
<div class="dashboard-book-card">
    <img src="{{values.1}}" alt="{{values.0}}" width="50"/>
    <p><a href="/books/{{id}}">{{values.0}}</a></p>
    <p>Progress: {{values.2}}</p>

</div>
{% endfor %}
<div id="dashboard-comments">
    <h3>Recent Comments</h3>
    {% for comment in comments %}
    <div class="comment-card">
        <h5>{{comment}}</h5>
        <h6>{{comment.chapter}}</h6>
        <h6>{{comment.chapter.book}}</h6>
        <p>{{comment.content}}</p>
        {% if reader in comment.likes.all %}
        <input class="like-button" id="comment-{{comment.id}}" type="button" value="Unlike"/>
        {% else %}
        <input class="like-button" id="comment-{{comment.id}}" type="button" value="Like"/>
        {% endif %}
        <p>Likes: <span id="like-count-{{comment.id}}">{{comment.likes.count}}</span></p> 
        
    </div>
    {% endfor %}
</div>
<div id="dashboard-to-do">
    <h3>What should I read today?</h3>
    {% for chapter in to_do %}
    {% if chapter.is_late %}
    <div class="chapter-card overdue" id="chapter-card-{{chapter.id}}">
    {% else %}
    <div class="chapter-card" id="chapter-card-{{chapter.id}}">
    {% endif%}
        <h6>{{chapter.chapter.book}}: {{chapter.chapter}}</h6>
        <p> Due: {{chapter.duedate}}</p>
        <input class="chapter-complete" id="chapter-{{chapter.id}}-dashboard" type="button" value="complete"/>
    </div>
    {% endfor %}
</div>
{% endblock %}